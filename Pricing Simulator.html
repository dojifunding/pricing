<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PropFirm Flex - Simulateur de Pricing & Configuration</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        h1 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .main-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 1024px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .evaluation-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .evaluation-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
        }
        
        .evaluation-card.selected {
            border: 3px solid #667eea;
            background: linear-gradient(to bottom, #f0f4ff, white);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .card-title {
            font-size: 1.5em;
            color: #333;
            font-weight: bold;
        }
        
        .badge {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .badge.instant {
            background: #10b981;
            color: white;
        }
        
        .badge.one-step {
            background: #3b82f6;
            color: white;
        }
        
        .badge.two-step {
            background: #8b5cf6;
            color: white;
        }
        
        .parameters {
            margin-bottom: 20px;
        }
        
        .parameter-group {
            margin-bottom: 15px;
        }
        
        .parameter-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9em;
            color: #666;
        }
        
        .parameter-value {
            font-weight: bold;
            color: #333;
        }
        
        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #e0e0e0;
            outline: none;
            -webkit-appearance: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .slider::-webkit-slider-thumb:hover {
            background: #764ba2;
        }
        
        .slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }
        
        .select-wrapper {
            position: relative;
        }
        
        select {
            width: 100%;
            padding: 8px 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: white;
            font-size: 0.9em;
            cursor: pointer;
            transition: border-color 0.3s;
        }
        
        select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .pricing-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
        }
        
        .price-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 0.95em;
        }
        
        .price-row.total {
            font-size: 1.3em;
            font-weight: bold;
            padding-top: 15px;
            border-top: 2px solid rgba(255,255,255,0.3);
        }
        
        .risk-indicator {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        
        .risk-indicator.low {
            background: #d1fae5;
            color: #065f46;
        }
        
        .risk-indicator.medium {
            background: #fed7aa;
            color: #92400e;
        }
        
        .risk-indicator.high {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .rules-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .rules-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 20px;
        }
        
        @media (max-width: 768px) {
            .rules-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .rule-card {
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        
        .rule-card:hover {
            border-color: #667eea;
            background: #f9fafb;
        }
        
        .rule-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
        }
        
        .rule-icon {
            width: 20px;
            height: 20px;
            margin-right: 8px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .rule-description {
            font-size: 0.9em;
            color: #666;
            line-height: 1.5;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        .stat-card {
            background: #f9fafb;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
        }
        
        .stat-label {
            font-size: 0.85em;
            color: #666;
            margin-top: 5px;
        }
        
        .comparison-table {
            width: 100%;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-top: 30px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        
        td {
            padding: 12px 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        tr:hover {
            background: #f9fafb;
        }
        
        .btn-calculate {
            width: 100%;
            padding: 12px 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }
        
        .btn-calculate:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }
        
        .warning-box {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            color: #92400e;
            padding: 12px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 0.9em;
        }
        
        .success-box {
            background: #d1fae5;
            border: 1px solid #10b981;
            color: #065f46;
            padding: 12px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ PropFirm Flex - Simulateur de Pricing</h1>
        
        <div class="main-grid">
            <!-- Instant Funding Card -->
            <div class="evaluation-card" id="instant-card">
                <div class="card-header">
                    <h2 class="card-title">Instant Funding</h2>
                    <span class="badge instant">Imm√©diat</span>
                </div>
                
                <div class="parameters">
                    <div class="parameter-group">
                        <div class="parameter-label">
                            <span>Taille du Compte</span>
                            <span class="parameter-value" id="instant-size-value">$25,000</span>
                        </div>
                        <select id="instant-size" onchange="updateInstant()">
                            <option value="5000">$5,000</option>
                            <option value="10000">$10,000</option>
                            <option value="25000" selected>$25,000</option>
                            <option value="50000">$50,000</option>
                            <option value="100000">$100,000</option>
                            <option value="200000">$200,000</option>
                        </select>
                    </div>
                    
                    <div class="parameter-group">
                        <div class="parameter-label">
                            <span>Daily Loss</span>
                            <span class="parameter-value" id="instant-daily-value">3%</span>
                        </div>
                        <input type="range" class="slider" id="instant-daily" 
                               min="2" max="6" value="3" step="0.5" 
                               oninput="updateInstant()">
                    </div>
                    
                    <div class="parameter-group">
                        <div class="parameter-label">
                            <span>Max Loss</span>
                            <span class="parameter-value" id="instant-max-value">6%</span>
                        </div>
                        <input type="range" class="slider" id="instant-max" 
                               min="4" max="10" value="6" step="0.5" 
                               oninput="updateInstant()">
                    </div>
                    
                    <div class="parameter-group">
                        <div class="parameter-label">
                            <span>Profit Split</span>
                            <span class="parameter-value" id="instant-split-value">50%</span>
                        </div>
                        <input type="range" class="slider" id="instant-split" 
                               min="50" max="80" value="50" step="5" 
                               oninput="updateInstant()">
                    </div>
                    
                    <div class="parameter-group">
                        <div class="parameter-label">
                            <span>Type de Drawdown</span>
                        </div>
                        <select id="instant-dd-type" onchange="updateInstant()">
                            <option value="static">Statique</option>
                            <option value="trailing">Trailing</option>
                            <option value="eod">End of Day</option>
                        </select>
                    </div>
                </div>
                
                <div class="pricing-display">
                    <div class="price-row">
                        <span>Prix de Base</span>
                        <span id="instant-base">$299</span>
                    </div>
                    <div class="price-row">
                        <span>Ajustement Risque</span>
                        <span id="instant-risk-adj">+$0</span>
                    </div>
                    <div class="price-row">
                        <span>Ajustement Split</span>
                        <span id="instant-split-adj">+$0</span>
                    </div>
                    <div class="price-row total">
                        <span>Prix Total</span>
                        <span id="instant-total">$299</span>
                    </div>
                </div>
                
                <div class="risk-indicator low" id="instant-risk">
                    <strong>Risque Faible</strong><br>
                    Configuration conservative
                </div>
                
                <div class="warning-box" style="display: none;" id="instant-warning">
                    ‚ö†Ô∏è Configuration √† haut risque d√©tect√©e
                </div>
            </div>
            
            <!-- 1 Step Card -->
            <div class="evaluation-card" id="onestep-card">
                <div class="card-header">
                    <h2 class="card-title">1 Step Challenge</h2>
                    <span class="badge one-step">Rapide</span>
                </div>
                
                <div class="parameters">
                    <div class="parameter-group">
                        <div class="parameter-label">
                            <span>Taille du Compte</span>
                            <span class="parameter-value" id="onestep-size-value">$50,000</span>
                        </div>
                        <select id="onestep-size" onchange="updateOneStep()">
                            <option value="5000">$5,000</option>
                            <option value="10000">$10,000</option>
                            <option value="25000">$25,000</option>
                            <option value="50000" selected>$50,000</option>
                            <option value="100000">$100,000</option>
                            <option value="200000">$200,000</option>
                        </select>
                    </div>
                    
                    <div class="parameter-group">
                        <div class="parameter-label">
                            <span>Profit Target</span>
                            <span class="parameter-value" id="onestep-target-value">8%</span>
                        </div>
                        <input type="range" class="slider" id="onestep-target" 
                               min="5" max="15" value="8" step="1" 
                               oninput="updateOneStep()">
                    </div>
                    
                    <div class="parameter-group">
                        <div class="parameter-label">
                            <span>Daily Loss</span>
                            <span class="parameter-value" id="onestep-daily-value">4%</span>
                        </div>
                        <input type="range" class="slider" id="onestep-daily" 
                               min="2" max="8" value="4" step="0.5" 
                               oninput="updateOneStep()">
                    </div>
                    
                    <div class="parameter-group">
                        <div class="parameter-label">
                            <span>Max Loss</span>
                            <span class="parameter-value" id="onestep-max-value">8%</span>
                        </div>
                        <input type="range" class="slider" id="onestep-max" 
                               min="4" max="12" value="8" step="0.5" 
                               oninput="updateOneStep()">
                    </div>
                    
                    <div class="parameter-group">
                        <div class="parameter-label">
                            <span>Profit Split</span>
                            <span class="parameter-value" id="onestep-split-value">75%</span>
                        </div>
                        <input type="range" class="slider" id="onestep-split" 
                               min="60" max="90" value="75" step="5" 
                               oninput="updateOneStep()">
                    </div>
                    
                    <div class="parameter-group">
                        <div class="parameter-label">
                            <span>Min Trading Days</span>
                            <span class="parameter-value" id="onestep-days-value">5</span>
                        </div>
                        <input type="range" class="slider" id="onestep-days" 
                               min="3" max="10" value="5" step="1" 
                               oninput="updateOneStep()">
                    </div>
                    
                    <div class="parameter-group">
                        <div class="parameter-label">
                            <span>Consistency Rule</span>
                            <span class="parameter-value" id="onestep-consistency-value">40%</span>
                        </div>
                        <input type="range" class="slider" id="onestep-consistency" 
                               min="30" max="50" value="40" step="5" 
                               oninput="updateOneStep()">
                    </div>
                </div>
                
                <div class="pricing-display">
                    <div class="price-row">
                        <span>Prix de Base</span>
                        <span id="onestep-base">$199</span>
                    </div>
                    <div class="price-row">
                        <span>Ajustement Difficult√©</span>
                        <span id="onestep-diff-adj">+$0</span>
                    </div>
                    <div class="price-row">
                        <span>Ajustement Split</span>
                        <span id="onestep-split-adj">+$0</span>
                    </div>
                    <div class="price-row total">
                        <span>Prix Total</span>
                        <span id="onestep-total">$199</span>
                    </div>
                </div>
                
                <div class="risk-indicator medium" id="onestep-risk">
                    <strong>Risque Moyen</strong><br>
                    Configuration √©quilibr√©e
                </div>
            </div>
            
            <!-- 2 Step Card -->
            <div class="evaluation-card" id="twostep-card">
                <div class="card-header">
                    <h2 class="card-title">2 Step Challenge</h2>
                    <span class="badge two-step">Classique</span>
                </div>
                
                <div class="parameters">
                    <div class="parameter-group">
                        <div class="parameter-label">
                            <span>Taille du Compte</span>
                            <span class="parameter-value" id="twostep-size-value">$100,000</span>
                        </div>
                        <select id="twostep-size" onchange="updateTwoStep()">
                            <option value="5000">$5,000</option>
                            <option value="10000">$10,000</option>
                            <option value="25000">$25,000</option>
                            <option value="50000">$50,000</option>
                            <option value="100000" selected>$100,000</option>
                            <option value="200000">$200,000</option>
                        </select>
                    </div>
                    
                    <div class="parameter-group">
                        <div class="parameter-label">
                            <span>Phase 1 Target</span>
                            <span class="parameter-value" id="twostep-target1-value">8%</span>
                        </div>
                        <input type="range" class="slider" id="twostep-target1" 
                               min="5" max="12" value="8" step="1" 
                               oninput="updateTwoStep()">
                    </div>
                    
                    <div class="parameter-group">
                        <div class="parameter-label">
                            <span>Phase 2 Target</span>
                            <span class="parameter-value" id="twostep-target2-value">5%</span>
                        </div>
                        <input type="range" class="slider" id="twostep-target2" 
                               min="3" max="8" value="5" step="1" 
                               oninput="updateTwoStep()">
                    </div>
                    
                    <div class="parameter-group">
                        <div class="parameter-label">
                            <span>Daily Loss</span>
                            <span class="parameter-value" id="twostep-daily-value">5%</span>
                        </div>
                        <input type="range" class="slider" id="twostep-daily" 
                               min="3" max="8" value="5" step="0.5" 
                               oninput="updateTwoStep()">
                    </div>
                    
                    <div class="parameter-group">
                        <div class="parameter-label">
                            <span>Max Loss</span>
                            <span class="parameter-value" id="twostep-max-value">10%</span>
                        </div>
                        <input type="range" class="slider" id="twostep-max" 
                               min="6" max="15" value="10" step="0.5" 
                               oninput="updateTwoStep()">
                    </div>
                    
                    <div class="parameter-group">
                        <div class="parameter-label">
                            <span>Profit Split</span>
                            <span class="parameter-value" id="twostep-split-value">80%</span>
                        </div>
                        <input type="range" class="slider" id="twostep-split" 
                               min="70" max="90" value="80" step="5" 
                               oninput="updateTwoStep()">
                    </div>
                    
                    <div class="parameter-group">
                        <div class="parameter-label">
                            <span>Min Trading Days (Total)</span>
                            <span class="parameter-value" id="twostep-days-value">10</span>
                        </div>
                        <input type="range" class="slider" id="twostep-days" 
                               min="5" max="20" value="10" step="1" 
                               oninput="updateTwoStep()">
                    </div>
                    
                    <div class="parameter-group">
                        <div class="parameter-label">
                            <span>Consistency Rule</span>
                            <span class="parameter-value" id="twostep-consistency-value">45%</span>
                        </div>
                        <input type="range" class="slider" id="twostep-consistency" 
                               min="35" max="50" value="45" step="5" 
                               oninput="updateTwoStep()">
                    </div>
                </div>
                
                <div class="pricing-display">
                    <div class="price-row">
                        <span>Prix de Base</span>
                        <span id="twostep-base">$399</span>
                    </div>
                    <div class="price-row">
                        <span>Ajustement Difficult√©</span>
                        <span id="twostep-diff-adj">+$0</span>
                    </div>
                    <div class="price-row">
                        <span>Ajustement Split</span>
                        <span id="twostep-split-adj">+$0</span>
                    </div>
                    <div class="price-row total">
                        <span>Prix Total</span>
                        <span id="twostep-total">$399</span>
                    </div>
                </div>
                
                <div class="risk-indicator medium" id="twostep-risk">
                    <strong>Risque Moyen</strong><br>
                    Configuration standard
                </div>
            </div>
        </div>
        
        <!-- Rules Section -->
        <div class="rules-section">
            <h2 style="margin-bottom: 20px; color: #333;">üìã R√®gles de Protection Appliqu√©es</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="total-configs">0</div>
                    <div class="stat-label">Configurations Possibles</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="avg-price">$0</div>
                    <div class="stat-label">Prix Moyen</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="risk-score">0.0</div>
                    <div class="stat-label">Score de Risque</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="protection-level">Fort</div>
                    <div class="stat-label">Niveau Protection</div>
                </div>
            </div>
            
            <div class="rules-grid">
                <div class="rule-card">
                    <div class="rule-title">
                        <span class="rule-icon">üõ°Ô∏è</span>
                        Consistency Rule Obligatoire
                    </div>
                    <div class="rule-description">
                        Minimum 30% √† 50% selon configuration. Emp√™che le "lucky trading" et assure une performance r√©guli√®re.
                    </div>
                </div>
                
                <div class="rule-card">
                    <div class="rule-title">
                        <span class="rule-icon">üí∞</span>
                        Pricing Dynamique
                    </div>
                    <div class="rule-description">
                        Prix ajust√© automatiquement selon le niveau de risque. Configuration facile = prix plus √©lev√©.
                    </div>
                </div>
                
                <div class="rule-card">
                    <div class="rule-title">
                        <span class="rule-icon">üìä</span>
                        Risk Score System
                    </div>
                    <div class="rule-description">
                        Score calcul√© en temps r√©el. Score < 0.5 = surveillance accrue. Score > 1.5 = avantages bonus.
                    </div>
                </div>
                
                <div class="rule-card">
                    <div class="rule-title">
                        <span class="rule-icon">üîí</span>
                        Progressive Scaling Lock
                    </div>
                    <div class="rule-description">
                        Apr√®s 1er payout: 75% options modifiables. Apr√®s 3 payouts: 50% options verrouill√©es.
                    </div>
                </div>
                
                <div class="rule-card">
                    <div class="rule-title">
                        <span class="rule-icon">üì∞</span>
                        News Trading Adaptatif
                    </div>
                    <div class="rule-description">
                        Restrictions bas√©es sur config: Target < 8% = news interdit. Daily Loss > 5% = buffer 5 min.
                    </div>
                </div>
                
                <div class="rule-card">
                    <div class="rule-title">
                        <span class="rule-icon">‚ö°</span>
                        Payout Velocity Control
                    </div>
                    <div class="rule-description">
                        Max payout/mois = Account √ó (1/Risk Score) √ó 0.2. Limite les pertes en cas d'exploitation.
                    </div>
                </div>
                
                <div class="rule-card">
                    <div class="rule-title">
                        <span class="rule-icon">üéØ</span>
                        Minimum Performance
                    </div>
                    <div class="rule-description">
                        Sharpe Ratio min: 0.5, Win Rate min: 30%, Trades min: 4 √ó Min Trading Days.
                    </div>
                </div>
                
                <div class="rule-card">
                    <div class="rule-title">
                        <span class="rule-icon">üîÑ</span>
                        Configuration Cooldown
                    </div>
                    <div class="rule-description">
                        7 jours avant retry avec m√™mes params. Max 3 configs/mois. Change apr√®s funded = reset.
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Comparison Table -->
        <div class="comparison-table">
            <table>
                <thead>
                    <tr>
                        <th>Caract√©ristique</th>
                        <th>Instant Funding</th>
                        <th>1 Step Challenge</th>
                        <th>2 Step Challenge</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Temps d'acc√®s</strong></td>
                        <td>Imm√©diat</td>
                        <td>5-10 jours</td>
                        <td>10-20 jours</td>
                    </tr>
                    <tr>
                        <td><strong>Profit Target</strong></td>
                        <td>Aucun</td>
                        <td>5-15% (custom)</td>
                        <td>Phase 1: 5-12%, Phase 2: 3-8%</td>
                    </tr>
                    <tr>
                        <td><strong>Prix Base ($10K)</strong></td>
                        <td>$99</td>
                        <td>$49</td>
                        <td>$89</td>
                    </tr>
                    <tr>
                        <td><strong>Risque Firme</strong></td>
                        <td>√âlev√© (pas de filtre)</td>
                        <td>Moyen</td>
                        <td>Faible (double filtre)</td>
                    </tr>
                    <tr>
                        <td><strong>Scaling Maximum</strong></td>
                        <td>√ó2 (si profitable 3 mois)</td>
                        <td>√ó5</td>
                        <td>√ó10</td>
                    </tr>
                    <tr>
                        <td><strong>News Trading</strong></td>
                        <td>Interdit</td>
                        <td>Restreint selon config</td>
                        <td>Autoris√© avec buffer</td>
                    </tr>
                    <tr>
                        <td><strong>Weekend Holding</strong></td>
                        <td>Non (sauf crypto)</td>
                        <td>Selon min days choisis</td>
                        <td>Oui</td>
                    </tr>
                    <tr>
                        <td><strong>Copy Trading</strong></td>
                        <td>Interdit</td>
                        <td>Autoris√© avec v√©rification</td>
                        <td>Autoris√©</td>
                    </tr>
                    <tr>
                        <td><strong>EA/Bots</strong></td>
                        <td>Restreint</td>
                        <td>Autoris√© (sauf HFT)</td>
                        <td>Autoris√©</td>
                    </tr>
                    <tr>
                        <td><strong>Payout Minimum</strong></td>
                        <td>3% profit</td>
                        <td>2% profit</td>
                        <td>1% profit</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    
    <script>
        // Base prices per account size
        const basePrices = {
            instant: { 5000: 99, 10000: 149, 25000: 299, 50000: 499, 100000: 799, 200000: 1299 },
            onestep: { 5000: 39, 10000: 49, 25000: 99, 50000: 199, 100000: 349, 200000: 599 },
            twostep: { 5000: 69, 10000: 89, 25000: 149, 50000: 249, 100000: 399, 200000: 699 }
        };
        
        function calculateRiskScore(type, params) {
            let score = 0;
            
            if (type === 'instant') {
                score = (params.split / 100) / ((params.daily / 100) * (params.max / 100));
            } else if (type === 'onestep') {
                score = ((params.target / 100) * (params.split / 100)) / 
                        ((params.daily / 100) * (params.max / 100) * (params.days / 10));
            } else if (type === 'twostep') {
                score = (((params.target1 + params.target2) / 200) * (params.split / 100)) / 
                        ((params.daily / 100) * (params.max / 100) * (params.days / 20));
            }
            
            return score.toFixed(2);
        }
        
        function updateInstant() {
            const size = parseInt(document.getElementById('instant-size').value);
            const daily = parseFloat(document.getElementById('instant-daily').value);
            const max = parseFloat(document.getElementById('instant-max').value);
            const split = parseInt(document.getElementById('instant-split').value);
            const ddType = document.getElementById('instant-dd-type').value;
            
            // Update display values
            document.getElementById('instant-size-value').textContent = `$${size.toLocaleString()}`;
            document.getElementById('instant-daily-value').textContent = `${daily}%`;
            document.getElementById('instant-max-value').textContent = `${max}%`;
            document.getElementById('instant-split-value').textContent = `${split}%`;
            
            // Calculate pricing
            let basePrice = basePrices.instant[size];
            let riskAdj = 0;
            let splitAdj = 0;
            
            // Risk adjustments - Higher loss limits = Higher risk = Higher price
            if (daily > 4) riskAdj += (daily - 4) * 80;  // Prix augmente avec daily loss √©lev√©
            if (daily < 3) riskAdj -= (3 - daily) * 50;  // Prix diminue avec daily loss faible
            if (max > 8) riskAdj += (max - 8) * 60;      // Prix augmente avec max loss √©lev√©
            if (max < 6) riskAdj -= (6 - max) * 40;      // Prix diminue avec max loss faible
            
            // DD type adjustment
            if (ddType === 'trailing') riskAdj += 50;
            if (ddType === 'eod') riskAdj -= 30;
            
            // Split adjustment
            splitAdj = (split - 50) * 5;
            
            const total = Math.max(basePrice + riskAdj + splitAdj, basePrice * 0.5);
            
            // Update pricing display
            document.getElementById('instant-base').textContent = `$${basePrice}`;
            document.getElementById('instant-risk-adj').textContent = `${riskAdj >= 0 ? '+' : ''}$${riskAdj}`;
            document.getElementById('instant-split-adj').textContent = `${splitAdj >= 0 ? '+' : ''}$${splitAdj}`;
            document.getElementById('instant-total').textContent = `$${Math.round(total)}`;
            
            // Calculate risk score
            const riskScore = calculateRiskScore('instant', { daily, max, split });
            updateRiskIndicator('instant', riskScore);
            
            // Show warning if needed
            const warning = document.getElementById('instant-warning');
            if (daily > 5 || max > 8 || split > 70) {
                warning.style.display = 'block';
            } else {
                warning.style.display = 'none';
            }
            
            updateGlobalStats();
        }
        
        function updateOneStep() {
            const size = parseInt(document.getElementById('onestep-size').value);
            const target = parseInt(document.getElementById('onestep-target').value);
            const daily = parseFloat(document.getElementById('onestep-daily').value);
            const max = parseFloat(document.getElementById('onestep-max').value);
            const split = parseInt(document.getElementById('onestep-split').value);
            const days = parseInt(document.getElementById('onestep-days').value);
            const consistency = parseInt(document.getElementById('onestep-consistency').value);
            
            // Update display values
            document.getElementById('onestep-size-value').textContent = `$${size.toLocaleString()}`;
            document.getElementById('onestep-target-value').textContent = `${target}%`;
            document.getElementById('onestep-daily-value').textContent = `${daily}%`;
            document.getElementById('onestep-max-value').textContent = `${max}%`;
            document.getElementById('onestep-split-value').textContent = `${split}%`;
            document.getElementById('onestep-days-value').textContent = `${days}`;
            document.getElementById('onestep-consistency-value').textContent = `${consistency}%`;
            
            // Calculate pricing
            let basePrice = basePrices.onestep[size];
            let diffAdj = 0;
            let splitAdj = 0;
            
            // Difficulty adjustments
            if (target < 8) diffAdj += (8 - target) * 20;    // Target facile = prix plus √©lev√©
            if (target > 10) diffAdj -= (target - 10) * 15;  // Target difficile = prix plus bas
            if (daily > 5) diffAdj += (daily - 5) * 60;      // Daily loss √©lev√© = prix plus √©lev√©
            if (daily < 4) diffAdj -= (4 - daily) * 30;      // Daily loss faible = prix plus bas
            if (max > 10) diffAdj += (max - 10) * 50;        // Max loss √©lev√© = prix plus √©lev√©
            if (max < 8) diffAdj -= (8 - max) * 25;          // Max loss faible = prix plus bas
            if (days < 5) diffAdj += (5 - days) * 15;
            if (consistency < 40) diffAdj += (40 - consistency) * 2;
            
            // Split adjustment
            splitAdj = (split - 75) * 4;
            
            const total = Math.max(basePrice + diffAdj + splitAdj, basePrice * 0.5);
            
            // Update pricing display
            document.getElementById('onestep-base').textContent = `$${basePrice}`;
            document.getElementById('onestep-diff-adj').textContent = `${diffAdj >= 0 ? '+' : ''}$${diffAdj}`;
            document.getElementById('onestep-split-adj').textContent = `${splitAdj >= 0 ? '+' : ''}$${splitAdj}`;
            document.getElementById('onestep-total').textContent = `$${Math.round(total)}`;
            
            // Calculate risk score
            const riskScore = calculateRiskScore('onestep', { target, daily, max, split, days });
            updateRiskIndicator('onestep', riskScore);
            
            updateGlobalStats();
        }
        
        function updateTwoStep() {
            const size = parseInt(document.getElementById('twostep-size').value);
            const target1 = parseInt(document.getElementById('twostep-target1').value);
            const target2 = parseInt(document.getElementById('twostep-target2').value);
            const daily = parseFloat(document.getElementById('twostep-daily').value);
            const max = parseFloat(document.getElementById('twostep-max').value);
            const split = parseInt(document.getElementById('twostep-split').value);
            const days = parseInt(document.getElementById('twostep-days').value);
            const consistency = parseInt(document.getElementById('twostep-consistency').value);
            
            // Update display values
            document.getElementById('twostep-size-value').textContent = `$${size.toLocaleString()}`;
            document.getElementById('twostep-target1-value').textContent = `${target1}%`;
            document.getElementById('twostep-target2-value').textContent = `${target2}%`;
            document.getElementById('twostep-daily-value').textContent = `${daily}%`;
            document.getElementById('twostep-max-value').textContent = `${max}%`;
            document.getElementById('twostep-split-value').textContent = `${split}%`;
            document.getElementById('twostep-days-value').textContent = `${days}`;
            document.getElementById('twostep-consistency-value').textContent = `${consistency}%`;
            
            // Calculate pricing
            let basePrice = basePrices.twostep[size];
            let diffAdj = 0;
            let splitAdj = 0;
            
            // Difficulty adjustments
            const totalTarget = target1 + target2;
            if (totalTarget < 13) diffAdj += (13 - totalTarget) * 15;  // Targets faciles = prix plus √©lev√©
            if (totalTarget > 15) diffAdj -= (totalTarget - 15) * 10;  // Targets difficiles = prix plus bas
            if (daily > 5) diffAdj += (daily - 5) * 50;                // Daily loss √©lev√© = prix plus √©lev√©
            if (daily < 5) diffAdj -= (5 - daily) * 25;                // Daily loss faible = prix plus bas
            if (max > 10) diffAdj += (max - 10) * 45;                  // Max loss √©lev√© = prix plus √©lev√©
            if (max < 10) diffAdj -= (10 - max) * 20;                  // Max loss faible = prix plus bas
            if (days < 10) diffAdj += (10 - days) * 10;
            if (consistency < 45) diffAdj += (45 - consistency) * 3;
            
            // Split adjustment
            splitAdj = (split - 80) * 6;
            
            const total = Math.max(basePrice + diffAdj + splitAdj, basePrice * 0.5);
            
            // Update pricing display
            document.getElementById('twostep-base').textContent = `$${basePrice}`;
            document.getElementById('twostep-diff-adj').textContent = `${diffAdj >= 0 ? '+' : ''}$${diffAdj}`;
            document.getElementById('twostep-split-adj').textContent = `${splitAdj >= 0 ? '+' : ''}$${splitAdj}`;
            document.getElementById('twostep-total').textContent = `$${Math.round(total)}`;
            
            // Calculate risk score
            const riskScore = calculateRiskScore('twostep', { target1, target2, daily, max, split, days });
            updateRiskIndicator('twostep', riskScore);
            
            updateGlobalStats();
        }
        
        function updateRiskIndicator(type, score) {
            const indicator = document.getElementById(`${type}-risk`);
            if (score < 0.5) {
                indicator.className = 'risk-indicator high';
                indicator.innerHTML = '<strong>Risque √âlev√©</strong><br>Configuration agressive';
            } else if (score < 1.5) {
                indicator.className = 'risk-indicator medium';
                indicator.innerHTML = '<strong>Risque Moyen</strong><br>Configuration √©quilibr√©e';
            } else {
                indicator.className = 'risk-indicator low';
                indicator.innerHTML = '<strong>Risque Faible</strong><br>Configuration conservative';
            }
        }
        
        function updateGlobalStats() {
            // Calculate total possible configurations
            const totalConfigs = 6 * 9 * 13 * 7 * 4 * 3; // Approximation
            document.getElementById('total-configs').textContent = totalConfigs.toLocaleString();
            
            // Calculate average price
            const instantTotal = parseInt(document.getElementById('instant-total').textContent.replace('$', ''));
            const onestepTotal = parseInt(document.getElementById('onestep-total').textContent.replace('$', ''));
            const twostepTotal = parseInt(document.getElementById('twostep-total').textContent.replace('$', ''));
            const avgPrice = Math.round((instantTotal + onestepTotal + twostepTotal) / 3);
            document.getElementById('avg-price').textContent = `$${avgPrice}`;
            
            // Calculate average risk score
            const scores = [
                calculateRiskScore('instant', {
                    daily: parseFloat(document.getElementById('instant-daily').value),
                    max: parseFloat(document.getElementById('instant-max').value),
                    split: parseInt(document.getElementById('instant-split').value)
                }),
                calculateRiskScore('onestep', {
                    target: parseInt(document.getElementById('onestep-target').value),
                    daily: parseFloat(document.getElementById('onestep-daily').value),
                    max: parseFloat(document.getElementById('onestep-max').value),
                    split: parseInt(document.getElementById('onestep-split').value),
                    days: parseInt(document.getElementById('onestep-days').value)
                }),
                calculateRiskScore('twostep', {
                    target1: parseInt(document.getElementById('twostep-target1').value),
                    target2: parseInt(document.getElementById('twostep-target2').value),
                    daily: parseFloat(document.getElementById('twostep-daily').value),
                    max: parseFloat(document.getElementById('twostep-max').value),
                    split: parseInt(document.getElementById('twostep-split').value),
                    days: parseInt(document.getElementById('twostep-days').value)
                })
            ];
            const avgScore = (scores.reduce((a, b) => parseFloat(a) + parseFloat(b), 0) / 3).toFixed(2);
            document.getElementById('risk-score').textContent = avgScore;
            
            // Update protection level
            if (avgScore < 0.7) {
                document.getElementById('protection-level').textContent = 'Maximum';
            } else if (avgScore < 1.3) {
                document.getElementById('protection-level').textContent = 'Fort';
            } else {
                document.getElementById('protection-level').textContent = 'Mod√©r√©';
            }
        }
        
        // Initialize on load
        window.onload = function() {
            updateInstant();
            updateOneStep();
            updateTwoStep();
        };
    </script>
</body>
</html>
